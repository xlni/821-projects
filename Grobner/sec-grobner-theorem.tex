\section{Reduction modulo an ideal}\label{sec:grobner-theorem}
In this section, we give a general formulation of the problem described in \S\ref{sec:introduction}, and examine the aforementioned reduction process in further detail. In particular, we determine the requisite conditions for the reduction process to be well-behaved.

Let $k$ be a field and $X$ a set of variables. (When doing computations throughout this paper, we will implicitly assume that $k$ has characteristic zero, but all the theoretical discussion is applicable in any characteristic.) Consider $V = k\langle X \rangle$, the $k$-vector space generated by the elements of $X$. From this, we construct the \emph{tensor algebra}
\[
	T(V) \coloneqq \bigoplus_{n\geq 0} V^{\otimes n}.
\]
As a vector space, $T(V)$ has a basis given by the \emph{monomials}
\[
	\{x_{i_1}\otimes \cdots \otimes x_{i_n} \in V^{\otimes n} \mid x_{i_j} \in X\}.
\]
The multiplication of monomials is given by concatenation, and this extends linearly to a multiplication on all of $T(V)$. The resulting algebra is precisely the non-commutative polynomial ring over $k$ with variables in $X$. We will use multiplicative notation instead of $\otimes$ to reflect this.

Now suppose we have a two-sided ideal $\mathfrak{a}$ generated by a subset $F\subset T(V)$. Elements of $\mathfrak{a}$ are finite sums of the form
\[
	\sum u_i f_i v_i
\]
where $u_i, v_i \in T(V)$ and $f_i \in F$.
Given an arbitrary $p\in T(V)$, our task is to determine whether $p$ belongs to $\mathfrak{a}$. Equivalently, consider the quotient map $T(V) \to T(V)/\mathfrak{a}$. The image of $p$ is its congruence class, which we will denote by $[p]$. The question posed above asks whether $[p]=0$.

As demonstrated in \S\ref{sec:introduction}, our strategy will be to \emph{reduce} $p$, by means of the relations $\{f=0 \mid f\in F\}$, to a polynomial $p_\red$ which represents the congruence class $[p]$. The quotient map is a split surjection (as a map of vector spaces) and the map sending $[p]$ to $p_\red$ will produce an explicit splitting:
\[\begin{tikzcd}
	T(V) \arrow[r, "p \mapsto {[p]}",swap] & \arrow[l,bend right, swap," p_\red \mapsfrom {[p]}"] T(V)/\mathfrak{a}
\end{tikzcd}\]
In particular, $p \in \mathfrak{a}$ if and only if $p_\red = 0$.

We need an \emph{order} to make much sense of the word ``reduction.'' To this end, impose a well-ordering on $X$. Then, order monomials first by degree, and order monomials of the same degree by lexicographic order (using the order on $X$). For example, if $X = \{x,y\}$ with $x < y$, then the monomials are ordered as in \eqref{eq:deglex-two-variables}.
It is easy to see that, since $X$ is well-ordered, this \emph{degree-lexicographic} (deglex) ordering of monomials is also a well-ordering. Furthermore, note that if $u,v,m$ are monomials and $u < v$, we also have $um < uv$ and $mu < mv$. We will say that a polynomial $\phi$ is \emph{lower} than a monomial $m$ if all monomials appearing in $\phi$ are smaller than $m$ according to this monomial order.

Each $f \in F$ can be written in the form $a f = m - \phi$, where $m$ is the highest appearing monomial with respect to deglex, $\phi$ is lower than $m$, and $a \in k^\times$. Since scaling the elements of $F$ does not affect the ideal $\mathfrak{a}$, we may assume\footnote{If we do not work over a field, then we cannot make this assumption, and that complicates things significantly.} that $a = 1$. Hence $f$ gives us the equality $[m] = [\phi]$, which we alternatively express as the congruence $m \equiv \phi$. Using all the elements of $F$, we get a family of congruences $\{ m_i \equiv \phi_i \}$. Note that if we ever have $m_i = um_jv$ for some monomials $u,v$, then we can replace $f_i$ by $u\phi_j v - \phi_i$ without altering $\mathfrak{a}$. Repeating this process as necessary, we can assume that no leading monomial $m_i$ is divisible by another.

Using these congruences, we can reduce polynomials: if a monomial $u m_i v$ appears in our polynomial $p$, we can replace that monomial by $u \phi_i v$. However, this alone will not suffice as the reduction process. We gave an example in \S\ref{sec:introduction} to demonstrate its shortcomings, and we give another example now.

\begin{example}\label{exa:x2-y2}
	Let $X=\{x,y\}$ with $x < y$ and let $\mathfrak{a}$ be generated by the single polynomial $y^2 - x^2$. Since $xx < yy$, this gives us the congruence $y^2 \equiv x^2$. However, this does not reduce the polynomial
	\[
		p = yx^2 - x^2 y
	\]
	because none of the terms are divisible by $y^2$. According to our procedure, this expression is already ``reduced,'' but it is clear that $[p]=0$. If we judiciously ``add zero,'' this can be salvaged:
	\begin{align*}
		p &= yx^2 - x^2 y + (y^2)y - y(y^2)\\
		&\equiv yx^2 - x^2 y + x^2 y - y x^2\\
		&= 0.
	\end{align*}
\end{example}

To accommodate the likes of ``adding zero,'' we introduce a structure which is more flexible than polynomials.
\begin{defn}
	A \emph{monomial list} is a finite unordered list (i.e. a multiset) of the form
	\[
	L = \{a_i u_i \mid u_i \text{ a monomial}, a_i \in k^\times\}.
	\]
	The monomial list $L$ \emph{represents} the polynomial $\sum a_i u_i$. Addition of monomial lists means to take their disjoint union. Given a polynomial $p$, one can form the monomial list $L_p$ whose elements are the terms of $p$. Clearly $L_p$ represents $p$.
\end{defn}
There are two types of simplifications which can be done to a monomial list $L$:
\begin{enumerate}
	\item (reduction) If $m_i \equiv \phi_i$ is one of our congruences and $aum_iv$ is an element of $L$, remove the element $aum_iv$ and add $L_{au\phi_iv}$ to the result.
	\item (merging) If $au$ and $a'u$ are two elements of $L$ with the same monomial and $a+a' \neq 0$, replace them by the single element $(a+a')u$. If $a+a' = 0$, remove both elements.
\end{enumerate}
If a monomial list is fully simplified, then it is equal to $L_{p}$ for a reduced polynomial $p$.

We recall some terminology regarding trees.
\begin{defn}
	A \emph{tree} is a directed acyclic graph with a distinguished node/vertex called the \emph{root node} such that there is a unique path from the root node to any other node in the tree. Let $A,B$ be nodes. If there exists a path from $A$ to $B$, we say that $B$ is \emph{under} $A$ (so $A$ is under itself). If there is an edge from $A$ to $B$, we call $B$ a \emph{child} of $A$.
\end{defn}
Given a monomial list $L$, we can construct a tree where each node is labeled with a monomial list, according to the following specifications:
\begin{enumerate}
	\item The root node is labeled by $L$.
	\item The children of a node correspond to simplification operations applicable to that node. The child nodes are labeled with the monomial lists obtained after those simplifications.
\end{enumerate}
We call this the \emph{simplification tree} of $L$. Let us first show that the tree is always finite, even if the family of congruences is infinite, or if $X$ is infinite.
\begin{prop}\label{prop:finite-tree}
	The simplification tree of any monomial list is finite.
\end{prop}
\begin{proof}
	Say a monomial $v$ is \emph{reachable} from the list $L$ if it is possible to apply a sequence of reductions to $L$ and obtain a list in which $v$ appears. Suppose that there exists a monomial $u$ such that the set of monomials reachable from $L_u$ is infinite. Since the deglex ordering is a well-ordering, we can assume that $u$ is the lowest such monomial. But there are only finitely many congruences which reduce $L_u$, and for each monomial $u_i$ appearing in these reductions, there are finitely many monomials reachable from $u_i$. Thus there are only finitely many monomials reachable from $L_u$, contradiction.
	
	It follows that there are only finitely many monomials reachable from any given monomial list $L$. Sort these reachable monomials in deglex order as $u_1 < \ldots < u_N$. Now consider the quantity
	\[
		\tau_L = \sum_{i=1}^N 2^i (\text{number of times }u_i \text{ appears in }L).
	\]
	This is a nonnegative integer, and applying any simplification operation causes this quantity to decrease. Hence the depth of the simplification tree is bounded, and since there are only finitely many branches at each node, the whole tree is finite.
\end{proof}

The terminal nodes of this tree are simplified monomial lists, which \textit{a priori} need not be the same. In Example \ref{exa:x2-y2}, we start with the root node
\[
	\{yx^2, -x^2y, y^3, -y^3\}
\]
and consider the path given by the following simplifications:
\begin{enumerate}
	\item $\{yx^2, -x^2y, x^2y, -y^3\}$
	\item $\{yx^2, -x^2y, x^2y, -yx^2\}$
	\item $\{-x^2y, x^2y\}$
	\item $\emptyset$.
\end{enumerate}
This brings us to a terminal node which is labeled $\emptyset$. But there is also a path given by merging the last two elements, bringing us immediately to a different terminal node:
\begin{enumerate}
	\item $\{yx^2, -x^2y\}$.
\end{enumerate}

The culprit is that there are two different reductions of the monomial $(y^2) y = y (y^2)$ arising from the ``overlap'' of $y^2$ with itself, making this overlap ``inconsistent.'' We make these notions more precise.
\begin{defn}\label{def:overlap}
	An \emph{overlap} of the monomial $m_i$ with the monomial $m_j$ is an equality
	\[
	m_i u = v m_j,
	\]
	where $u,v$ are monomials and $\deg v < \deg m_i$ (equivalently, $\deg u < \deg m_j$).
\end{defn}
\begin{defn}\label{def:consistent}
	Given a family of congruences $\{m_i \equiv \phi_i\}$ and an overlap $m_i u = v m_j$, we say that the overlap is
	\begin{itemize}
		\item \emph{weakly consistent} if $\phi_i u$ and $v \phi_j$ \emph{can} be reduced to the same polynomial using the family of congruences, and
		\item \emph{consistent} if $\phi_i u$ and $v \phi_j$ \emph{always} reduce to the same polynomial using the family of congruences.
	\end{itemize}
\end{defn}
The following proposition shows that this notion successfully identifies the cause of distinct terminal nodes, as in Example \ref{exa:x2-y2}.
\begin{prop}\label{prop:consistent-tree-terminals}
	If all overlaps in the family of congruences $\{m_i \equiv \phi_i\}$ are weakly consistent, then for any monomial list $L$, the terminal nodes of the simplification tree of $L$ are all identical.
\end{prop}
\begin{proof}
	Say that a node $T$ of the simplification tree of $L$ has property $\mathcal{C}$ if all terminal nodes under $T$ are identical. Suppose that all the children of a node $T$ have property $\mathcal{C}$. Then we claim that $T$ does as well.
	
	Consider two distinct children $T_1, T_2$ of $T$, each of which is reached by either a ``reduce'' or ``merge'' operation. Most of the time, these operations \emph{commute}---as an illustration, consider the setup of Example \ref{exa:x2-y2} with the list $T = \{2x, 3x, xy^2\}$:
	\[\begin{tikzcd}
	& T = \{2x, 3x, xy^2\} \arrow[dash, dl, swap, "\text{merge }2x{,} 3x"] \arrow[dash, dr, "\text{reduce }x(y^2)"]\\
	T_1=\{5x, xy^2\}\arrow[dash,d,swap, "\text{reduce }x(y^2)"] && T_2=\{2x, 3x, x^3\} \arrow[dash,d,"\text{merge }2x{,} 3x"]\\
	\{5x, x^3\} && \{5x, x^3\}
	\end{tikzcd}\]
	In these cases, we can find a node under $T_1$ which is identical to a node under $T_2$. Since $T_1,T_2$ have property $\mathcal{C}$, it follows that all terminal nodes reached through $T_1$ or $T_2$ are identical.
	
	The exception is when $T_1,T_2$ are reached by \emph{overlapping} ``reduce'' operations applied to the same element of $T$. Suppose this overlap is $m_i u = vm_j$. Then $T_1$ and $T_2$ differ in one spot, where $T_1$ contains the element $r(\phi_i u)s$ while $T_2$ contains the element $r(v\phi_j)s$, for some monomials $r,s$. But the assumption that overlaps are weakly consistent entails that there exists a node under $T_1$ which is identical to a node under $T_2$. So once again, the same argument as before shows that all terminal nodes under $T_1$ or $T_2$ are identical. Thus all the terminal nodes under $T$ are identical, as desired.
	
	Terminal nodes trivially have property $\mathcal{C}$. By Proposition \ref{prop:finite-tree}, the tree is finite. So by induction, we deduce that all nodes in the tree have property $\mathcal{C}$, including the root node $L$.
\end{proof}
So when all overlaps are weakly consistent, if we take $p_\red$ to be the polynomial represented by a terminal node of the simplification tree of $L_p$, the assignment $p \mapsto p_\red$ is well-defined. Note that this also implies the overlaps are actually consistent, rather than just weakly consistent.

We can replace each $\phi_i$ with $(\phi_i)_\red$, and this brings us to the definition of a \emph{Gr\"obner basis}:
\begin{defn}\label{def:grobner}
	Let $\mathfrak{a}$ be a two-sided ideal in $T(V)$. We say that a subset $\{m_i - \phi_i\}\subset \mathfrak{a}$, where each $m_i$ is a monomial and $\phi_i$ is a polynomial lower than $m_i$, forms a \emph{Gr\"obner basis} for $\mathfrak{a}$ if all of the following conditions are satisfied:
	\begin{enumerate}
		\item $\{m_i - \phi_i\}$ generates the ideal $\mathfrak{a}$.
		\item\label{item:grobnerconsistent} All overlaps are (weakly) consistent (see Definitions \ref{def:overlap}, \ref{def:consistent}).
		\item $m_i$ is not divisible by $m_j$ for all distinct $i,j$.
		\item $\phi_i = (\phi_i)_\red$ for all $i$.
	\end{enumerate}
\end{defn}
With a Gr\"obner basis, the map $p\mapsto p_\red$ is well-defined as a consequence of Proposition \ref{prop:consistent-tree-terminals}. However, we are interested in the assignment $[p]\mapsto p_\red$. We need to show that the outcome of reduction depends only on the congruence class, so that this function is well-defined.

To this end, suppose that $[p] = [q]$, meaning that
\[
	q = p + \sum_{i,j} a_{i,j}u_{i,j} (m_i - \phi_i) v_{i,j}
\]
for some monomials $u_{i,j}, v_{i,j}$, and coefficients $a_{i,j}\in k$. Then consider the monomial list
\[
	L= L_p + \sum L_{a_{i,j}u_{i,j}m_iv_{i,j}} + \sum L_{-a_{i,j}u_{i,j}m_i v_{i,j}}.
\]
If we apply merge operations to the second and third parts of this sum, they cancel and we obtain $L_p$. But if we apply reduce operations to the third part of the sum, followed by merge operations to clean up, we obtain $L_q$. Thus both $L_p$ and $L_q$ appear in the simplification tree of $L$. Since all terminal nodes of the tree are identical, it follows that $p_\red = q_\red$, as desired.

The main challenge was showing that the function $[p] \mapsto p_\red$ is well-defined. Other nice properties of the map follow easily. If $p_\red = 0$ then $p \equiv 0$; i.e. $[p]=0$. So the map is injective. Moreover, it is linear: if $p,q\in T(V)$, then the simplification tree of $L_p + L_q$ has $L_{p_{\red}+q_{\red}}$ as its terminal node, but $L_{p+q}$ is under $L_p + L_q$ in the tree by a sequence of merge operations. Thus $(p+q)_\red = p_\red + q_\red$. Likewise one can show that for $a \in k$, we have $(ap)_\red = a(p_\red)$.

Altogether, we have proven the following theorem.
\begin{thm}\label{thm:grobner-thm}
	Let $X$ be a well-ordered set of variables, and $k$ a field. Let $V = k\langle X \rangle$, and let $T(V)$ be the tensor algebra of $V$; i.e. the non-commutative polynomial ring over $k$ with variables in $X$.
	
	Suppose $\mathfrak{a} \subset T(V)$ is a two-sided ideal with a Gr\"obner basis $\{m_i - \phi_i\}$. Then the reduction procedure given by the congruences $m_i \equiv \phi_i$ produces a well-defined linear map $T(V)/\mathfrak{a} \to T(V)$ sending $p$ to $p_\red$. This map is a right inverse (i.e. section) of the quotient map $T(V) \to T(V)/\mathfrak{a}$:
	\[\begin{tikzcd}
	T(V) \arrow[r, "p \mapsto {[p]}",swap] & \arrow[l,bend right, swap," p_\red \mapsfrom {[p]}"] T(V)/\mathfrak{a}
	\end{tikzcd}\]
\end{thm}
\begin{cor}\label{cor:grobner}
	A basis for $T(V)/\mathfrak{a}$ is given by the equivalence classes of reduced monomials:
	\[
		\{[u] \mid u \textnormal{ is a monomial and }u = u_\red\}.
	\]
	These are equivalently the monomials which are not divisible by any $m_i$.
\end{cor}
We have shown that the reduction process is well-behaved if we have a Gr\"obner basis. But we have not discussed how to produce a Gr\"obner basis given generators of an ideal---so we have not yet resolved Example \ref{exa:x2-y2}, for instance. We describe an algorithm for this task in \S\ref{sec:implementation}. But before we do so, let us examine some additional properties of Gr\"obner bases.
